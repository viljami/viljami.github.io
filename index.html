<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Viljami Peltola</title>
    <meta name="description" content="Software Gardener passionate about Rust, TypeScript, Docker, and Agile development">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#272822">
    <meta property="og:title" content="Viljami Peltola">
    <meta property="og:description" content="Software Gardener passionate about Rust, TypeScript, Docker, and Agile development">

    <style>
        :root {
            --bg-color: #272822;
            --text-color: #fff;
            --link-border: #4b4b4b;
            --link-hover: #e6d460;
            --code-blue: #66d9ef;
            --code-red: #f9275d;
            --code-yellow: #e6d460;
        }

        html {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            height: 100%;
        }

        body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        div, pre {
            margin: 0;
            padding: 0;
        }

        pre { 
            display: inline;
            font-family: 'Fira Code', 'Consolas', monospace;
        }

        h1, p, pre { 
            color: var(--text-color);
        }

        a {
            color: inherit;
            text-decoration: none;
            border-bottom: 1px solid var(--link-border);
            transition: border-color 0.2s ease;
        }

        a:hover {
            text-decoration: none;
            border-bottom: 1px solid var(--link-hover);
        }

        .code-blue { color: var(--code-blue); }
        .code-red { color: var(--code-red); }
        .code-yellow { color: var(--code-yellow); }

        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #ffffff;
                --text-color: #272822;
                --link-border: #cccccc;
            }
        }
    </style>
</head>
<body>
    <main>
        <pre id="code-display" style="font-size: 34px;">
(<span class="code-blue">function</span>(coder){

    <span class="code-blue">var</span> name<span class="code-red"> = </span><span class="code-yellow">'Viljami Peltola'</span>,
        job<span class="code-red"> = </span><span class="code-yellow">'Software Gardener'</span>,

        aboutMe<span class="code-red"> = </span>[
            <a href="https://www.linkedin.com/in/viljamipeltola/"><span class="code-yellow">'LinkedIn'</span></a>,
            <a href="http://github.com/viljami"><span class="code-yellow">'Github'</span></a>,
        ],

        favorites<span class="code-red"> = </span>[
            <a href="https://www.rust-lang.org/"><span class="code-yellow">'Rust'</span></a>,
            <a href="https://www.typescriptlang.org/"><span class="code-yellow">'TypeScript'</span></a>,
            <a href="https://www.docker.com/"><span class="code-yellow">'Docker'</span></a>,
            <a href="https://agilemanifesto.org/"><span class="code-yellow">'Agile'</span></a>,
        ],

        target<span class="code-red"> = </span><span class="code-yellow">'Enjoyable software.'</span>

})(window)
        </pre>
    </main>

<script>
const CodeDisplay = {
    init() {
        this.pre = document.getElementById('code-display');
        this.fontSize = 14;
        this.applyCodeColors();
        this.setupResizeHandler();
        this.resize();
    },

    spanify(string, pattern, className) {
        const isRegExp = pattern instanceof RegExp;
        const replacement = isRegExp ? (pattern.exec(string) || [''])[0] : pattern;
        return string.replaceAll(pattern, `<span class="${className}">${replacement}</span>`);
    },

    applyCodeColors() {
        if (!this.pre) return;
        
        const content = this.pre.innerHTML;
        const coloredContent = content
            .split('\n')
            .map(line => {
                return ['function', 'var', 'const', 'let']
                    .reduce((acc, keyword) => this.spanify(acc, keyword, 'code-blue'), line)
                    .replace(/ = /g, '<span class="code-red"> = </span>')
                    .replace(/('[^']*')/g, match => `<span class="code-yellow">${match}</span>`);
            })
            .join('\n');

        this.pre.innerHTML = coloredContent;
    },

    isTooBig() {
        const box = this.pre.getBoundingClientRect();
        return box.width > window.innerWidth || box.height > window.innerHeight;
    },

    resize() {
        if (!this.pre) return;

        const minFontSize = 14;
        const maxFontSize = 48;

        if (this.isTooBig()) {
            while (this.isTooBig() && this.fontSize > minFontSize) {
                this.fontSize--;
                this.pre.style.fontSize = `${this.fontSize}px`;
            }
        } else {
            while (!this.isTooBig() && this.fontSize < maxFontSize) {
                this.fontSize++;
                this.pre.style.fontSize = `${this.fontSize}px`;
            }
            this.fontSize--;
            this.pre.style.fontSize = `${this.fontSize}px`;
        }
    },

    setupResizeHandler() {
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => this.resize(), 100);
        });
    }
};

document.addEventListener('DOMContentLoaded', () => CodeDisplay.init());
</script>

</body></html>